<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>StirlitzTrojan Application</title>
    <script src="https://cdn.firebase.com/js/client/2.4.2/firebase.js"></script>
  </head>
  <body>
    <div id="data">0</div>
    <div id="err">0</div>
    <script>
    <!--
    var url = window.location.href;
    if(url.indexOf("?") != -1){
      var type = "data";
      var params = url.split("?")[1].split(";");
      if(params.length >= 1){
        // Search type value
        params.forEach(function(param){
          if(param.indexOf("=")!=-1){
            var name = param.split("=")[0];
            var value = param.split("=")[1];
            if(name == "type") type = value;
          }
        });
        // Connect to firebase
        var firebase = new Firebase("https://scorching-heat-6563.firebaseio.com/");
        firebase.once("value", function(snapshot) {
          var data = snapshot.child(type).val();
          var output = "";
          // Get values by names
          params.forEach(function(param){
            if(param != "type=" + type){
              if(data.indexOf(param) != -1) output += data[param] + ",";
              else{
                document.getElementById("err").innerHTML = "Invalid params";
              }
            }
          });
          output = output.substr(0, output.length-1); // Removing last ','
          document.getElementById("data").innerHTML = output;
        }, function (e) {
          document.getElementById("err").innerHTML = "Exception: " + e.code;
        });
      }else{
        document.getElementById("err").innerHTML = "Invalid params";
      }
    }else{
      document.getElementById("err").innerHTML = "Invalid params";
    }
    -->
    </script>
  </body>
</html>
